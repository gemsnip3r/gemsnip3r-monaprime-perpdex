<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>School of Sorcery: FyreX Prime</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --void: #050208; /* Biraz daha açık siyah, assetler görünsün diye */
      --neon-purple: #b026ff;
      --witch-green: #00ff9d;
      --blood-red: #ff0055;
      --gold: #FFD700;
      
      --font-title: "Cinzel", serif;
      --font-body: "Outfit", sans-serif;
      
      --glass: rgba(10, 5, 20, 0.85);
      --glass-border: rgba(176, 38, 255, 0.4);
    }

    * { box-sizing: border-box; }
    
    html, body {
      margin: 0; padding: 0; width: 100%; height: 100%;
      background: var(--void); color: #e0e0e0;
      font-family: var(--font-body);
      overflow: hidden; /* Scroll yok, teleport var */
    }

    /* --- 1. BACKGROUND ASSETS (FIXED LAYER) --- */
    /* Z-Index ayarı kritik: -10 yaparak en arkaya atıyoruz */
    .stage {
      position: fixed; inset: 0; z-index: -10; 
      width: 100vw; height: 100vh;
      overflow: hidden; background: #000;
    }
    .layer {
      position: absolute; inset: -5%; /* Parallax payı */
      background-size: cover; background-position: center bottom;
      will-change: transform; pointer-events: none;
    }
    
    /* ASSET PATHLERİ - Klasörde bu isimlerde olduklarına emin ol */
    .sky { background-image: url("assets/bg-sky.png"); z-index: 1; opacity: 0.8; }
    .castle { background-image: url("assets/bg-castle.png"); z-index: 2; }
    .fog { background-image: url("assets/fog-back.png"); mix-blend-mode: screen; opacity: 0.4; z-index: 3; }
    .apes { background-image: url("assets/foreground-apes.png"); z-index: 5; }

    /* Sis Animasyonu */
    .fog-move { animation: drift 60s linear infinite; }
    @keyframes drift { 0% { transform: translateX(0); } 50% { transform: translateX(-50px); } 100% { transform: translateX(0); } }

    /* --- 2. PORTAL FX --- */
    .portal-overlay {
      position: fixed; inset: 0; z-index: 9000; pointer-events: none; display: none;
    }
    .portal-overlay.active { display: block; }
    .portal-center {
      position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);
      width: min(700px, 90vw); aspect-ratio: 1/1;
      display: grid; place-items: center;
    }
    .p-img { position: absolute; width: 100%; height: 100%; object-fit: contain; }
    /* Asset Pathleri */
    .p-ring { background-image: url('assets/portal-ring.png'); } 
    /* Resim yüklenmezse CSS şekil fallback'i */
    .p-ring:empty { width:100%; height:100%; background:radial-gradient(transparent 60%, var(--neon-purple) 65%, transparent 70%); }
    
    .p-ring-anim { opacity: 0; transform: scale(0.5) rotate(-45deg); filter: drop-shadow(0 0 30px var(--neon-purple)); }
    .p-glow-anim { opacity: 0; transform: scale(0.5); mix-blend-mode: screen; }
    .p-flash-anim { opacity: 0; transform: scale(0.2); mix-blend-mode: add; }

    .portal-overlay.active .p-ring-anim { animation: ringIn 0.8s ease-out forwards; }
    .portal-overlay.active .p-glow-anim { animation: glowIn 0.8s ease-out forwards; }
    .portal-overlay.active .p-flash-anim { animation: flashIn 0.6s ease-out forwards; }

    @keyframes ringIn { 0%{opacity:0;transform:scale(0.5) rotate(-45deg)} 50%{opacity:1;transform:scale(1) rotate(0deg)} 100%{opacity:0;transform:scale(1.5) rotate(45deg)} }
    @keyframes glowIn { 0%{opacity:0;transform:scale(0.5)} 50%{opacity:1;transform:scale(1.1)} 100%{opacity:0;transform:scale(1.3)} }
    @keyframes flashIn { 0%{opacity:0;transform:scale(0.2)} 40%{opacity:1;transform:scale(1.2)} 100%{opacity:0;transform:scale(2)} }

    /* --- 3. NAV --- */
    nav {
      position: fixed; top: 0; width: 100%; z-index: 100;
      padding: 20px 40px; display: flex; justify-content: space-between; align-items: center;
      background: linear-gradient(to bottom, rgba(0,0,0,0.95), transparent);
    }
    .brand { font-family: var(--font-title); font-size: 24px; color: #fff; text-shadow: 0 0 15px var(--neon-purple); text-decoration: none; font-weight: 700; cursor: pointer; }
    .brand span { color: var(--witch-green); font-size: 0.8em; }

    .nav-items { display: flex; gap: 30px; }
    .nav-btn {
      background: none; border: none; color: #aaa; font-family: var(--font-title); font-size: 14px;
      cursor: pointer; transition: 0.3s; position: relative; letter-spacing: 0.1em;
    }
    .nav-btn:hover, .nav-btn.active-link { color: var(--witch-green); text-shadow: 0 0 10px var(--witch-green); }
    .nav-btn.active-link::after {
      content: ''; position: absolute; bottom: -5px; left: 0; width: 100%; height: 2px;
      background: var(--witch-green); box-shadow: 0 0 10px var(--witch-green);
    }

    /* --- 4. MAIN & SECTIONS (Teleport Logic) --- */
    main { position: relative; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; z-index: 10; }
    section {
      position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center;
      opacity: 0; pointer-events: none; transform: scale(0.9) translateY(20px); transition: 0.5s ease;
      padding: 80px 20px;
    }
    section.active-section { opacity: 1; pointer-events: auto; transform: scale(1) translateY(0); z-index: 20; }
    
    .content-wrapper {
      max-height: 85vh; overflow-y: auto; width: 100%; max-width: 1100px; padding: 20px;
      display: flex; flex-direction: column; align-items: center; scrollbar-width: none;
    }
    .content-wrapper::-webkit-scrollbar { display: none; }

    /* --- 5. UI COMPONENTS --- */
    h1 { font-family: var(--font-title); font-size: clamp(50px, 10vw, 120px); margin: 0; line-height: 0.9; text-transform: uppercase; color: #fff; text-shadow: 0 0 40px rgba(176, 38, 255, 0.5); text-align: center; }
    h2 { font-family: var(--font-title); font-size: 36px; text-transform: uppercase; color: #fff; margin-bottom: 30px; text-align: center; }
    h2 span { color: var(--witch-green); }
    
    .glass-panel {
      background: var(--glass); border: 1px solid var(--glass-border);
      border-radius: 20px; padding: 40px; width: 100%;
      backdrop-filter: blur(10px); box-shadow: 0 20px 50px rgba(0,0,0,0.8);
    }
    .btn-spell {
      padding: 14px 32px; background: rgba(36, 0, 70, 0.6);
      border: 1px solid var(--neon-purple); color: var(--neon-purple);
      font-family: var(--font-title); font-weight: 700; letter-spacing: 0.1em;
      cursor: pointer; transition: 0.3s; text-transform: uppercase; font-size: 14px;
    }
    .btn-spell:hover { background: var(--neon-purple); color: #000; box-shadow: 0 0 30px var(--neon-purple); }

    /* PerpDEX Card */
    .perpdex-card {
      background: linear-gradient(135deg, rgba(20, 241, 149, 0.1), rgba(0,0,0,0.95));
      border: 1px solid var(--witch-green); border-radius: 16px; padding: 40px;
      text-align: center; position: relative; overflow: hidden; box-shadow: 0 0 40px rgba(20, 241, 149, 0.15); margin-bottom: 30px;
    }
    .perpdex-badge { display: inline-block; background: var(--witch-green); color: #000; font-weight: 900; padding: 5px 10px; font-size: 12px; border-radius: 4px; margin-bottom: 15px; letter-spacing: 0.1em; }

    /* Pillars */
    .pillars-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; width: 100%; }
    .pillar {
      background: rgba(10, 5, 20, 0.8); border: 1px solid rgba(255,255,255,0.1);
      border-radius: 16px; padding: 30px 20px; text-align: center; transition: 0.3s;
    }
    .pillar:hover { transform: translateY(-10px); border-color: var(--neon-purple); }
    .pillar-icon {
      width: 60px; height: 60px; border-radius: 50%; margin: 0 auto 20px; display: grid; place-items: center; font-size: 24px;
      background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: #fff;
    }

    /* Mute Button (Ses Kontrol) */
    .mute-btn {
      position: fixed; bottom: 20px; right: 20px; z-index: 500; pointer-events: auto;
      width: 50px; height: 50px; border-radius: 50%;
      background: #000; border: 2px solid var(--witch-green); color: var(--witch-green);
      display: grid; place-items: center; cursor: pointer;
      box-shadow: 0 0 20px rgba(0,255,157,0.4);
      animation: pulseBtn 2s infinite;
    }
    @keyframes pulseBtn { 0%{transform:scale(1);} 50%{transform:scale(1.1);} 100%{transform:scale(1);} }

    /* Footer */
    footer { position: fixed; bottom: 0; width: 100%; z-index: 100; padding: 15px; text-align: center; pointer-events: none; }
    footer a { pointer-events: auto; color: #fff; margin: 0 10px; font-size: 18px; }
  </style>
</head>
<body>

  <div class="portal-overlay" id="portalOverlay">
    <div class="portal-center">
      <img src="assets/portal-ring.png" class="p-img p-ring-anim" alt="">
      <img src="assets/portal-inner-glow.png" class="p-img p-glow-anim" alt="">
      <img src="assets/portal-flash.png" class="p-img p-flash-anim" alt="">
    </div>
  </div>

  <div class="stage">
    <div class="layer sky" data-depth="0.05"></div>
    <div class="layer castle" data-depth="0.15"></div>
    <div class="layer fog fog-move"></div>
    <div class="layer apes" data-depth="0.4"></div>
  </div>

  <nav>
    <a class="brand" onclick="teleport('home')">FYREX <span>PRIME</span></a>
    <div class="nav-items">
      <button class="nav-btn active-link" onclick="teleport('home')">HOME</button>
      <button class="nav-btn" onclick="teleport('summon')">SUMMON</button>
      <button class="nav-btn" onclick="teleport('academy')">ACADEMY</button>
      <button class="nav-btn" onclick="teleport('path')">PATH</button>
      <button class="nav-btn" onclick="teleport('oracle')">ORACLE</button>
    </div>
  </nav>

  <main>
    
    <section id="home" class="active-section">
      <div class="content-wrapper">
        <div style="color:var(--neon-purple); letter-spacing:0.3em; font-weight:700; margin-bottom:15px; font-size:12px;">SOLANA MAINNET</div>
        <h1>FyreX</h1>
        <div style="margin-top:20px; padding:10px 20px; border:1px solid var(--witch-green); background:rgba(0,255,157,0.05); color:var(--witch-green); letter-spacing:0.2em; font-weight:600;">
          SUPPLY: 2,222 • MINT LIVE
        </div>
        <p style="color:#aaa; max-width:500px; text-align:center; margin-top:20px;">
          The ultimate Sorcery Academy. Home of the <b>PerpDEX</b>.
        </p>
        <div style="margin-top:40px;">
          <button class="btn-spell" style="background:var(--witch-green); color:#000; border:none; box-shadow:0 0 30px rgba(0,255,157,0.5);" onclick="teleport('summon')">
            START RITUAL
          </button>
        </div>
      </div>
    </section>

    <section id="summon">
      <div class="content-wrapper">
        <div class="glass-panel" style="max-width:500px; text-align:center;">
          <h2>The <span style="color:var(--neon-purple)">Altar</span></h2>
          <div style="width:140px; height:140px; margin:0 auto 30px; position:relative; display:flex; align-items:center; justify-content:center;">
            <div style="position:absolute; inset:0; border:2px dashed var(--neon-purple); border-radius:50%; animation:spin 10s linear infinite;"></div>
            <div style="position:absolute; inset:10px; border:2px solid var(--witch-green); border-radius:50%; animation:spin 5s reverse linear infinite;"></div>
            <i class="fa-solid fa-hand-sparkles" style="font-size:40px; color:#fff;"></i>
          </div>
          <div style="font-family:var(--font-title); font-size:18px; margin-bottom:20px; color:#fff;" id="mintStatus">Ready to Summon...</div>
          <div style="display:flex; justify-content:center; gap:20px; align-items:center; margin-bottom:20px;">
             <button class="btn-spell" onclick="adjustMint(-1)">-</button>
             <span style="font-size:24px; font-family:var(--font-title);" id="mintCount">1</span>
             <button class="btn-spell" onclick="adjustMint(1)">+</button>
          </div>
          <button class="btn-spell" style="width:100%; background:var(--witch-green); color:#000; border:none;" onclick="triggerMint()">
            SUMMON (0.5 SOL)
          </button>
        </div>
      </div>
    </section>

    <section id="academy">
      <div class="content-wrapper">
        <h2>FyreX <span style="color:var(--witch-green)">Academy</span></h2>
        
        <div class="perpdex-card">
          <div class="perpdex-badge">CORE UTILITY</div>
          <h3 style="font-family:var(--font-title); font-size:32px; color:#fff; margin:10px 0;">FyreX PerpDEX</h3>
          <p style="color:#ddd; max-width:600px; margin:0 auto 20px;">
            A decentralized perpetual exchange built for speed on Solana.
          </p>
          <ul style="list-style:none; padding:0; color:#aaa; margin-bottom:30px; line-height:2;">
            <li><i class="fa-solid fa-check" style="color:var(--witch-green)"></i> <b>Revenue Share</b> for Stakers</li>
            <li><i class="fa-solid fa-check" style="color:var(--witch-green)"></i> <b>Zero Trading Fees</b> for Holders</li>
          </ul>
          <button class="btn-spell">READ WHITEPAPER</button>
        </div>

        <div class="pillars-grid">
           <div class="pillar">
             <div class="pillar-icon" style="color:var(--neon-purple); border-color:var(--neon-purple);"><i class="fa-solid fa-robot"></i></div>
             <h4 style="font-family:var(--font-title); color:#fff; margin:0;">Sniper Bot</h4>
             <p style="font-size:13px; color:#888; margin-top:10px;">Fastest sniper on Solana. Free for holders.</p>
           </div>
           <div class="pillar">
             <div class="pillar-icon" style="color:var(--gold); border-color:var(--gold);"><i class="fa-solid fa-users"></i></div>
             <h4 style="font-family:var(--font-title); color:#fff; margin:0;">Dark DAO</h4>
             <p style="font-size:13px; color:#888; margin-top:10px;">Governance power. Vote on treasury.</p>
           </div>
        </div>
      </div>
    </section>

    <section id="path">
      <div class="content-wrapper">
        <h2>The <span style="color:var(--blood-red)">Path</span></h2>
        <div class="pillars-grid">
          <div class="pillar">
             <h3 style="color:#fff; font-family:var(--font-title);">Phase I</h3>
             <div style="color:var(--neon-purple); font-size:12px; font-weight:bold; margin-bottom:15px;">AWAKENING</div>
             <p style="color:#aaa; font-size:13px;">Community Launch. Whitelist Tasks via @fyrexprime.</p>
          </div>
          <div class="pillar" style="border-color:var(--witch-green);">
             <h3 style="color:#fff; font-family:var(--font-title);">Phase II</h3>
             <div style="color:var(--witch-green); font-size:12px; font-weight:bold; margin-bottom:15px;">THE SUMMONING</div>
             <p style="color:#aaa; font-size:13px;">Official Mint (2,222). Rarity Reveal. Staking Live.</p>
          </div>
          <div class="pillar" style="border-color:var(--gold);">
             <h3 style="color:#fff; font-family:var(--font-title);">Phase III</h3>
             <div style="color:var(--gold); font-size:12px; font-weight:bold; margin-bottom:15px;">ASCENSION</div>
             <p style="color:#aaa; font-size:13px;">PerpDEX Beta. Revenue Share. Expansion.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="oracle">
      <div class="content-wrapper">
        <div class="glass-panel" style="max-width:800px;">
          <h2>The <span style="color:var(--neon-purple)">Oracle</span></h2>
          <p style="color:#aaa; margin-bottom:30px;">Follow @fyrexprime for alpha.</p>
          <a href="https://x.com/fyrexprime" target="_blank" class="btn-spell" style="display:block; text-align:center; text-decoration:none; margin-bottom:15px;">FOLLOW ON X</a>
          <a href="https://t.me/fyrexprime" target="_blank" class="btn-spell" style="display:block; text-align:center; text-decoration:none; border-color:#229ED9; color:#229ED9;">JOIN TELEGRAM</a>
        </div>
      </div>
    </section>

  </main>

  <footer>
    <a href="https://x.com/fyrexprime" target="_blank" style="text-decoration:none;"><i class="fa-brands fa-x-twitter"></i></a>
    <a href="https://t.me/fyrexprime" target="_blank" style="text-decoration:none;"><i class="fa-brands fa-telegram"></i></a>
  </footer>

  <button class="mute-btn" id="muteBtn" onclick="toggleAudio()">
    <i class="fa-solid fa-volume-xmark" id="muteIcon"></i>
  </button>

  <script>
    /* --- 1. ROBUST AUDIO ENGINE (AUTO-UNLOCK) --- */
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    let audioCtx = new AudioContext();
    let isMuted = true;
    let ambienceNode = null;

    // Kilit Açıcı: Ekrana her tıklandığında motoru kontrol et ve devam ettir
    document.addEventListener('click', () => {
       if (audioCtx.state === 'suspended') {
         audioCtx.resume();
       }
    }, { once: false }); // Sürekli kontrol et, mobilde bazen ilk tık yetmez

    // Rüzgar Sesi Oluşturucu
    function createAmbience() {
      const bufferSize = 2 * audioCtx.sampleRate;
      const noiseBuffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      const output = noiseBuffer.getChannelData(0);
      for (let i = 0; i < bufferSize; i++) {
        const white = Math.random() * 2 - 1;
        output[i] = (lastOut + (0.02 * white)) / 1.02;
        lastOut = output[i];
        output[i] *= 3.5;
      }
      var lastOut = 0;

      ambienceNode = audioCtx.createBufferSource();
      ambienceNode.buffer = noiseBuffer;
      ambienceNode.loop = true;
      const gainNode = audioCtx.createGain();
      gainNode.gain.value = 0.15; // Ses seviyesi biraz daha yüksek
      
      const filter = audioCtx.createBiquadFilter();
      filter.type = 'lowpass';
      filter.frequency.value = 400;

      ambienceNode.connect(filter);
      filter.connect(gainNode);
      gainNode.connect(audioCtx.destination);
      ambienceNode.start();
    }

    // Büyü Sesi
    function playMagicSound() {
      if(isMuted) return;
      if (audioCtx.state === 'suspended') audioCtx.resume();

      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.type = 'sine';
      osc.frequency.setValueAtTime(200, audioCtx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(800, audioCtx.currentTime + 0.3);
      gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);

      osc.connect(gain);
      gain.connect(audioCtx.destination);
      osc.start();
      osc.stop(audioCtx.currentTime + 0.3);
    }

    function toggleAudio() {
      isMuted = !isMuted;
      const icon = document.getElementById('muteIcon');
      const btn = document.getElementById('muteBtn');

      if (!isMuted) {
        if(audioCtx.state === 'suspended') audioCtx.resume();
        if(!ambienceNode) createAmbience();
        icon.className = 'fa-solid fa-volume-high';
        btn.style.animation = 'none'; // Yanıp sönmeyi durdur
        btn.style.borderColor = '#fff';
      } else {
        if(audioCtx) audioCtx.suspend();
        icon.className = 'fa-solid fa-volume-xmark';
      }
    }

    /* --- 2. TELEPORT SYSTEM --- */
    function teleport(targetId) {
      playMagicSound();

      // Nav Update
      document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active-link'));
      // İlgili butonu aktif yapma mantığı eklenebilir

      // Portal FX
      const portal = document.getElementById('portalOverlay');
      portal.classList.remove('active');
      void portal.offsetWidth;
      portal.classList.add('active');

      // Section Switch
      const current = document.querySelector('.active-section');
      if(current) current.classList.remove('active-section');

      setTimeout(() => {
        document.getElementById(targetId).classList.add('active-section');
        setTimeout(() => portal.classList.remove('active'), 800);
      }, 500);
    }

    /* --- 3. MINT LOGIC --- */
    let mintAmount = 1;
    function adjustMint(val) { mintAmount += val; if(mintAmount < 1) mintAmount = 1; document.getElementById('mintCount').innerText = mintAmount; }
    function triggerMint() {
      playMagicSound();
      const status = document.getElementById('mintStatus');
      status.innerText = "Interacting with Contract...";
      status.style.color = "var(--witch-green)";
      setTimeout(() => { status.innerText = "Check Phantom..."; }, 1500);
      setTimeout(() => { status.innerText = "Success."; status.style.color = "#fff"; }, 3000);
    }

    /* --- 4. PARALLAX --- */
    const layers = document.querySelectorAll('.layer');
    window.addEventListener('mousemove', e => {
      const x = (e.clientX / window.innerWidth - 0.5);
      const y = (e.clientY / window.innerHeight - 0.5);
      layers.forEach(l => {
        const d = parseFloat(l.getAttribute('data-depth')) || 0;
        if(d) l.style.transform = `translate3d(${x*30*d}px, ${y*15*d}px, 0)`;
      });
    });
  </script>
</body>
</html>
